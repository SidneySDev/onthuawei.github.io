<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Configuração GPON</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            background-color: #f5f5f5;
            padding: 20px;
            display: grid;
            grid-template-columns: 1fr 1fr; /* Dividir em duas colunas */
            gap: 20px;
        }
        h2 {
            text-align: center;
            color: #333;
            grid-column: span 2; /* Expandir sobre duas colunas */
        }
        form {
            background-color: #fff;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
        }
        label {
            display: block;
            margin-bottom: 8px;
            color: #333;
        }
        input[type="text"],
        input[type="password"],
        select,
        input[type="submit"] {
            width: 100%;
            padding: 10px;
            margin-bottom: 15px;
            border: 1px solid #ccc;
            border-radius: 4px;
            box-sizing: border-box;
        }
        input[type="submit"] {
            background-color: #4CAF50;
            color: #fff;
            cursor: pointer;
        }
        input[type="submit"]:hover {
            background-color: #45a049;
        }
        .result-container {
            background-color: #f9f9f9;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
        }
        table {
            width: 100%;
            border-collapse: collapse;
        }
        th, td {
            border: 1px solid #ddd;
            padding: 8px;
            text-align: left;
        }
        th {
            background-color: #4CAF50;
            color: white;
        }
        .copy-button {
            padding: 5px 10px;
            background-color: #4CAF50;
            color: #fff;
            border: none;
            border-radius: 4px;
            cursor: pointer;
        }
        .copy-button.clicked {
            background-color: #ff0000; /* Cor vermelha ao ser clicado */
        }
    </style>
	
	<style type="text/css">
		@font-face {
		font-weight: 400;
		font-style:  normal;
		font-family: circular;

		src: url('chrome-extension://liecbddmkiiihnedobmlmillhodjkdmb/fonts/CircularXXWeb-Book.woff2') format('woff2');
		}

		@font-face {
		font-weight: 700;
		font-style:  normal;
		font-family: circular;

		src: url('chrome-extension://liecbddmkiiihnedobmlmillhodjkdmb/fonts/CircularXXWeb-Bold.woff2') format('woff2');
		}
	</style>
	
</head>

<body>
    <h2>Configuração GPON</h2>
    <form id="gponForm">
        <label for="serialNumber">Serial Number:</label>
        <input type="text" id="serialNumber" name="serialNumber" required="">

        <div class="compact-fields">
            <label for="frame">Frame:</label>
            <select id="frame" name="frame">
                <option value="0">0</option>
            </select>

            <label for="slot">Slot:</label>
            <select id="slot" name="slot">
                <option value="1">1</option>
            </select>

            <label for="pon">Porta PON:</label>
            <select id="pon" name="pon">
                <option value="0">0</option>
                <option value="1">1</option>
                <option value="2">2</option>
                <option value="3">3</option>
                <option value="4">4</option>
                <option value="5">5</option>
                <option value="6">6</option>
                <option value="7">7</option>
            </select>
            <p id="ponDescription"></p> <!-- Parágrafo para exibir a descrição -->

            <label for="onuId">ONU ID:</label>
            <select id="onuId" name="onuId" required=""><option value="0">0</option><option value="1">1</option><option value="2">2</option><option value="3">3</option><option value="4">4</option><option value="5">5</option><option value="6">6</option><option value="7">7</option><option value="8">8</option><option value="9">9</option><option value="10">10</option><option value="11">11</option><option value="12">12</option><option value="13">13</option><option value="14">14</option><option value="15">15</option><option value="16">16</option><option value="17">17</option><option value="18">18</option><option value="19">19</option><option value="20">20</option><option value="21">21</option><option value="22">22</option><option value="23">23</option><option value="24">24</option><option value="25">25</option><option value="26">26</option><option value="27">27</option><option value="28">28</option><option value="29">29</option><option value="30">30</option><option value="31">31</option><option value="32">32</option><option value="33">33</option><option value="34">34</option><option value="35">35</option><option value="36">36</option><option value="37">37</option><option value="38">38</option><option value="39">39</option><option value="40">40</option><option value="41">41</option><option value="42">42</option><option value="43">43</option><option value="44">44</option><option value="45">45</option><option value="46">46</option><option value="47">47</option><option value="48">48</option><option value="49">49</option><option value="50">50</option><option value="51">51</option><option value="52">52</option><option value="53">53</option><option value="54">54</option><option value="55">55</option><option value="56">56</option><option value="57">57</option><option value="58">58</option><option value="59">59</option><option value="60">60</option><option value="61">61</option><option value="62">62</option><option value="63">63</option><option value="64">64</option><option value="65">65</option><option value="66">66</option><option value="67">67</option><option value="68">68</option><option value="69">69</option><option value="70">70</option><option value="71">71</option><option value="72">72</option><option value="73">73</option><option value="74">74</option><option value="75">75</option><option value="76">76</option><option value="77">77</option><option value="78">78</option><option value="79">79</option><option value="80">80</option><option value="81">81</option><option value="82">82</option><option value="83">83</option><option value="84">84</option><option value="85">85</option><option value="86">86</option><option value="87">87</option><option value="88">88</option><option value="89">89</option><option value="90">90</option><option value="91">91</option><option value="92">92</option><option value="93">93</option><option value="94">94</option><option value="95">95</option><option value="96">96</option><option value="97">97</option><option value="98">98</option><option value="99">99</option><option value="100">100</option><option value="101">101</option><option value="102">102</option><option value="103">103</option><option value="104">104</option><option value="105">105</option><option value="106">106</option><option value="107">107</option><option value="108">108</option><option value="109">109</option><option value="110">110</option><option value="111">111</option><option value="112">112</option><option value="113">113</option><option value="114">114</option><option value="115">115</option><option value="116">116</option><option value="117">117</option><option value="118">118</option><option value="119">119</option><option value="120">120</option><option value="121">121</option><option value="122">122</option><option value="123">123</option><option value="124">124</option><option value="125">125</option><option value="126">126</option><option value="127">127</option><option value="128">128</option></select>
        </div>

        <input type="hidden" id="lineProfileID" name="lineProfileID" value="1">
        <input type="hidden" id="gemport" name="gemport" value="1">
        <input type="hidden" id="serviceProfileID" name="serviceProfileID" value="1">

        <label for="username">PPPoE Username:</label>
        <input type="text" id="username" name="username" required="">

        <label for="password">PPPoE Password:</label>
        <input type="text" id="password" name="password" required="">

        <label for="clientName">Nome Cliente:</label>
        <input type="text" id="clientName" name="clientName" required="">

        <label for="vlan">VLAN:</label>
        <select id="vlan" name="vlan">
            <option value="3512">3512 (OLT SEDE)</option>
            <option value="3513">3513 (OLT OLHO DAGUA)</option>
        </select>

        <label for="download">Download (Mbps):</label>
        <select id="download" name="download" required="" onchange="updateUpload()">
            <option value="100">100 Mbps</option>
            <option value="200">200 Mbps</option>
            <option value="400">400 Mbps</option>
            <option value="600">600 Mbps</option>
            <option value="1000">1000 Mbps</option>
        </select>

        <label for="upload">Upload (Mbps):</label>
        <input type="text" id="upload" name="upload" required="" disabled="">

        <input type="submit" value="Gerar Código" onclick="generateConfig(event)">
    </form>

    <div id="resultContainer" class="result-container"></div>

    <script>
        function generateConfig(event) {
            event.preventDefault(); // Evitar o envio real do formulário

            const serialNumber = document.getElementById('serialNumber').value;
            const frame = document.getElementById('frame').value;
            const slot = document.getElementById('slot').value;
            const pon = document.getElementById('pon').value;
            const lineProfileID = document.getElementById('lineProfileID').value;
            const gemport = document.getElementById('gemport').value;
            const serviceProfileID = document.getElementById('serviceProfileID').value;
            const username = document.getElementById('username').value;
            const password = document.getElementById('password').value;
            const clientName = document.getElementById('clientName').value;
            const vlan = document.getElementById('vlan').value;
            const download = document.getElementById('download').value;
            const upload = document.getElementById('upload').value;
            const onuId = document.getElementById('onuId').value;

            const configCode = `

				enable
				config
				interface gpon ${frame}/${slot}
				ont add ${pon} sn-auth ${serialNumber} omci ont-lineprofile-id ${lineProfileID} ont-srvprofile-id ${serviceProfileID} desc "${clientName}"
				ont ipconfig ${pon} ${onuId} pppoe vlan ${vlan} priority 5 user-account username ${username} password ${password}
				ont wan-config ${pon} ${onuId} ip-index 0 profile-id ${serviceProfileID}
				ont internet-config ${pon} ${onuId} ip-index 0
				ont port route ${pon} ${onuId} eth 1 enable
				ont port route ${pon} ${onuId} eth 2 enable
				ont port route ${pon} ${onuId} eth 3 enable
				ont port route ${pon} ${onuId} eth 4 enable
				q
				service-port vlan ${vlan} gpon ${frame}/${slot}/${pon} ont ${onuId} gemport ${gemport} multi-service user-vlan ${vlan} tag-transform translate rx-cttr ${download} tx-cttr ${upload}
				diagnose
				ont wan-access http ${frame}/${slot}/${pon} ${onuId} enable
				q
				save
    				q
				display ont info ${pon} ${onuId}
				`;

            const resultContainer = document.getElementById('resultContainer');
            resultContainer.innerHTML = ''; // Limpar conteúdo anterior

            const table = document.createElement('table');
            const headerRow = table.insertRow();
            ['Configuração', 'Ação'].forEach((headerText) => {
                const th = document.createElement('th');
                th.textContent = headerText;
                headerRow.appendChild(th);
            });

            const lines = configCode.trim().split('\n');
            lines.forEach((line) => {
                const row = table.insertRow();
                const configCell = row.insertCell();
                configCell.textContent = line;

                const copyCell = row.insertCell();
                const copyButton = document.createElement('button');
                copyButton.textContent = 'Copiar';
                copyButton.classList.add('copy-button');
                copyButton.onclick = () => {
                    navigator.clipboard.writeText(line)
                        .then(() => {
                            copyButton.classList.add('clicked'); // Adicionar classe para mudar a cor do botão
                        })
                        .catch((err) => {
                            console.error('Erro ao copiar: ', err);
                        });
                };
                copyCell.appendChild(copyButton);
            });

            resultContainer.appendChild(table);
        }

        function updateUpload() {
            const downloadInput = document.getElementById('download');
            const uploadInput = document.getElementById('upload');
            const selectedDownload = parseFloat(downloadInput.value);

            const uploadValue = Math.floor(selectedDownload / 2);
            uploadInput.value = uploadValue.toString();
        }

        const ponSelect = document.getElementById('pon');
        const descriptionParagraph = document.getElementById('ponDescription');
        ponSelect.addEventListener('change', () => {
            const selectedValue = parseInt(ponSelect.value);
            const descriptions = [
                "GRAN VILLAGE ARACAGY 1",
                "GRAN VILLAGE ARACAGY 2",
                "COND. SPORT GARDENS",
                "COND. GRAND PARK PASSAROS",
                "COND. GRAND PARK AGUAS",
                "COND. GRAND PARK BARCELONA",
                "COND. BOSQUE DOS PINHEIROS",
                "COND. ALLIANCE"
            ];

            if (!isNaN(selectedValue) && selectedValue >= 0 && selectedValue < descriptions.length) {
                descriptionParagraph.textContent = descriptions[selectedValue];
            } else {
                descriptionParagraph.textContent = '';
            }
        });

        const onuIdSelect = document.getElementById('onuId');
        for (let i = 0; i <= 128; i++) {
            const option = document.createElement('option');
            option.value = i;
            option.textContent = i;
            onuIdSelect.appendChild(option);
        }
    </script>


<script type="text/javascript" src="chrome-extension://nogempgplicnckhcmgjjjgflmipmbgaf/variables-sharing.js"></script>
<div id="loom-companion-mv3" ext-id="liecbddmkiiihnedobmlmillhodjkdmb">
	<section id="shadow-host-companion"></section>
</div>
</body>
</html>
